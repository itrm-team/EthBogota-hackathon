(self.webpackChunkMultiCash=self.webpackChunkMultiCash||[]).push([[7268],{7268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{RecuperarContrasenaPageModule:()=>D});var o=s(8583),n=s(665),r=s(3083),a=s(9445),i=s(4762),d=s(2468),c=s(3313),l=s(639),u=s(1228),p=s(6578),g=s(9709),h=s(1575),Z=s(9527),w=s(1354);const v=["recoverPasswordSwiper"];function m(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"1. Cu\xe1l era el nombre de tu mascota de la infancia?"),l.qZA(),l.qZA())}function f(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"2. D\xf3nde estudiaste la primaria?"),l.qZA(),l.qZA())}function q(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"3. Cu\xe1l es su banda o artista favorito?"),l.qZA(),l.qZA())}function A(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"4. Nombre de la empresa donde trabajo por primera vez?"),l.qZA(),l.qZA())}function M(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",15),l._uU(2),l.qZA(),l.qZA()),2&e){l.oxw();const e=l.MAs(12);l.xp6(2),l.hij(" ",e.errors.required?"Este campo es requerido":""," ")}}function C(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"1. Cual era el nombre de tu mascota de la infancia?"),l.qZA(),l.qZA())}function T(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"2. Donde estudiaste la primaria?"),l.qZA(),l.qZA())}function b(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"3. Cual es su banda o artista favorito?"),l.qZA(),l.qZA())}function x(e,t){1&e&&(l.TgZ(0,"div"),l.TgZ(1,"label"),l._uU(2,"4. Nombre de la empresa donde trabajo por primera vez?"),l.qZA(),l.qZA())}function _(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",15),l._uU(2),l.qZA(),l.qZA()),2&e){l.oxw();const e=l.MAs(21);l.xp6(2),l.hij(" ",e.errors.required?"Este campo es requerido":""," ")}}const P=function(){return{updateOn:"change"}};function y(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",3),l._UZ(1,"app-title",4),l.TgZ(2,"form",null,5),l.TgZ(4,"p",6),l._uU(5,"Responde a tus preguntas de seguridad para crear una nueva contrase\xf1a"),l.qZA(),l.TgZ(6,"div"),l.YNc(7,m,3,0,"div",7),l.YNc(8,f,3,0,"div",7),l.YNc(9,q,3,0,"div",7),l.YNc(10,A,3,0,"div",7),l.qZA(),l.TgZ(11,"input",8,9),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().account.questionR1=t}),l.qZA(),l.TgZ(13,"div",10),l.YNc(14,M,3,1,"div",7),l.qZA(),l.TgZ(15,"div"),l.YNc(16,C,3,0,"div",7),l.YNc(17,T,3,0,"div",7),l.YNc(18,b,3,0,"div",7),l.YNc(19,x,3,0,"div",7),l.qZA(),l.TgZ(20,"input",11,12),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().account.questionR2=t}),l.qZA(),l.TgZ(22,"div",10),l.YNc(23,_,3,1,"div",7),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",13),l.TgZ(25,"app-button",14),l.NdJ("click",function(){l.CHM(e);const t=l.MAs(12),s=l.MAs(21),o=l.oxw();return t.valid&&s.valid&&o.questions()}),l.qZA(),l.qZA()}if(2&e){const e=l.MAs(12),t=l.MAs(21),s=l.oxw();l.xp6(1),l.Q6J("title","Preguntas de seguridad"),l.xp6(6),l.Q6J("ngIf",1==s.selectedOption),l.xp6(1),l.Q6J("ngIf",2==s.selectedOption),l.xp6(1),l.Q6J("ngIf",3==s.selectedOption),l.xp6(1),l.Q6J("ngIf",4==s.selectedOption),l.xp6(1),l.Q6J("ngModel",s.account.questionR1)("ngModelOptions",l.DdM(17,P)),l.xp6(3),l.Q6J("ngIf",s.displayControl(e)),l.xp6(2),l.Q6J("ngIf",1==s.selectedOption2),l.xp6(1),l.Q6J("ngIf",2==s.selectedOption2),l.xp6(1),l.Q6J("ngIf",3==s.selectedOption2),l.xp6(1),l.Q6J("ngIf",4==s.selectedOption2),l.xp6(1),l.Q6J("ngModel",s.account.questionR2)("ngModelOptions",l.DdM(18,P)),l.xp6(3),l.Q6J("ngIf",s.displayControl(t)),l.xp6(2),l.Q6J("label","Continuar")("disable",!(e.valid&&t.valid))}}function O(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",15),l._uU(2),l.qZA(),l.qZA()),2&e){const e=l.oxw(3);l.xp6(2),l.HOy(" ",e.password.match("[A-Z]")?"":"Mayuscula faltante,"," ",e.password.match("[a-z]")?"":"Miniscula faltante,"," ",e.password.match("[$@$!.:#/+=^-_%*?&]")?"":"Caracter especial faltante,"," ",e.password.match("[a-zA-Z0-9]{8,}")?"":"Minimo 8 caracteres"," verifica tu contrase\xf1a. ")}}function J(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",15),l._uU(2),l.qZA(),l.YNc(3,O,3,4,"div",7),l.qZA()),2&e){l.oxw();const e=l.MAs(15);l.xp6(2),l.hij(" ",e.errors.required?"Contrase\xf1a requerida":""," "),l.xp6(1),l.Q6J("ngIf",e.errors.pattern)}}function N(e,t){if(1&e&&(l.TgZ(0,"div"),l.TgZ(1,"p",15),l._uU(2),l.qZA(),l.qZA()),2&e){l.oxw();const e=l.MAs(26),t=l.oxw();l.xp6(2),l.AsE(" ",e.errors.required?"Contrase\xf1a requerida":""," ",t.password!=t.retypepassword?"Las contrase\xf1as deben ser iguales":""," ")}}const k=function(){return[!0,!1]};function Q(e,t){if(1&e){const e=l.EpF();l.TgZ(0,"div",3),l._UZ(1,"app-title",16),l.TgZ(2,"form",null,17),l.TgZ(4,"p",6),l._uU(5,"Debe contener al menos "),l._UZ(6,"br"),l._uU(7,"8 car\xe1cteres, 1 mayuscula,"),l._UZ(8,"br"),l._uU(9,"1 minuscula, y un n\xfamero o caracter especial."),l.qZA(),l.TgZ(10,"label"),l._uU(11,"Contrase\xf1a"),l.qZA(),l.TgZ(12,"div",18),l.TgZ(13,"div",19),l.TgZ(14,"input",20,21),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().password=t}),l.qZA(),l.TgZ(16,"div",22),l.TgZ(17,"img",23),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.showPassword=!t.showPassword}),l.qZA(),l.TgZ(18,"img",24),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.showPassword=!t.showPassword}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(19,"div",10),l.YNc(20,J,4,2,"div",7),l.qZA(),l.qZA(),l.TgZ(21,"label"),l._uU(22,"Verificaci\xf3n de contrase\xf1a"),l.qZA(),l.TgZ(23,"div",18),l.TgZ(24,"div",19),l.TgZ(25,"input",25,26),l.NdJ("ngModelChange",function(t){return l.CHM(e),l.oxw().retypepassword=t}),l.qZA(),l.TgZ(27,"div",22),l.TgZ(28,"img",23),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.showPassword2=!t.showPassword2}),l.qZA(),l.TgZ(29,"img",24),l.NdJ("click",function(){l.CHM(e);const t=l.oxw();return t.showPassword2=!t.showPassword2}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",10),l.YNc(31,N,3,2,"div",7),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(32,"div",13),l.TgZ(33,"app-button",14),l.NdJ("click",function(){l.CHM(e);const t=l.MAs(15),s=l.MAs(26),o=l.oxw();return o.password==o.retypepassword&&t.valid&&s.valid&&o.recoverPassword(o.token)}),l.qZA(),l.qZA()}if(2&e){const e=l.MAs(15),t=l.MAs(26),s=l.oxw();l.xp6(1),l.Q6J("title","Configura tu contrase\xf1a")("arrows",l.DdM(20,k)),l.xp6(13),l.Q6J("type",s.showPassword?"text":"password")("ngModel",s.password)("ngModelOptions",l.DdM(21,P)),l.xp6(3),l.ekj("hide",s.showPassword),l.xp6(1),l.ekj("hide",!s.showPassword),l.xp6(2),l.Q6J("ngIf",s.displayControl(e)),l.xp6(5),l.Q6J("type",s.showPassword2?"text":"password")("ngModel",s.retypepassword)("ngModelOptions",l.DdM(22,P)),l.xp6(3),l.ekj("hide",s.showPassword2),l.xp6(1),l.ekj("hide",!s.showPassword2),l.xp6(2),l.Q6J("ngIf",s.displayControl(t)),l.xp6(2),l.Q6J("label","Continuar")("disable",!(s.password==s.retypepassword&&e.valid&&t.valid))}}d.ZP.use([d.eZ]);const U=[{path:"",component:(()=>{class e{constructor(e,t,s,o,n,r,a,i){this.route=e,this.router=t,this.toastCtrl=s,this.authService=o,this.navCtrl=n,this.storage=r,this.userService=a,this.modalCtrl=i,this.passwordValidated=!0,this.passwordsAreEquals=!0,this.isVisible=!1,this.showPassword2=!1,this.contadorLocal=1,this.selectedOption=0,this.actions=[{idquestion:0,name:"Select Question"},{idquestion:1,name:"1. Cu\xe1l era el nombre de tu mascota de la infancia?"},{idquestion:2,name:"2. D\xf3nde estudiaste la primaria?"},{idquestion:3,name:"3. Cu\xe1l es su banda o artista favorito?"},{idquestion:4,name:"4. Nombre de la empresa donde trabajo por primera vez?"}],this.selectedOption2=0,this.actions2=[{idquestion2:0,name2:"Select Question"},{idquestion2:1,name2:"1. Cu\xe1l era el nombre de tu mascota de la infancia?"},{idquestion2:2,name2:"2. D\xf3nde estudiaste la primaria?"},{idquestion2:3,name2:"3. Cu\xe1l es su banda o artista favorito?"},{idquestion2:4,name2:"4. Nombre de la empresa donde trabajo por primera vez?"}],this.config={slidesPerView:1,spaceBetween:400,allowTouchMove:!1},this.account={token:"",questionR1:"",questionR2:""}}ngOnInit(){this.route.queryParams.subscribe(e=>{if(e.token){this.token=e.token;try{this.authService.validateExternalToken(e.token),this.userData=this.authService.resolveToken(e),console.log("got userData",this.userData),this.isVisible=!0,this.selectedOption=this.userData.numberQ1,this.selectedOption2=this.userData.numberQ2}catch(t){console.log("error",t),this.presentErrorToastString("INVALID ACCESS TOKEN")}}else this.presentErrorToastString("UNAUTHORIZED")})}showHidePassword(){this.showPassword=!this.showPassword}changeSlide(e){switch(console.log("swiper: ",this.swiper),e){case"home":this.navCtrl.navigateForward("");break;case"next":case"back":this.swiper.swiperRef.slideNext(500)}}presentErrorToastString(e){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,position:"top",buttons:[{text:"OK",handler:()=>{this.router.navigateByUrl("")}}]})).present()})}sendAlertToast(e){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:e,position:"top",buttons:[{text:"OK",handler:()=>{}}]})).present()})}checkPassword(e){return/^(?=.*[0-9])(?=.*[!@#$%^&\.*])[a-zA-Z0-9!@#\.$%^&*]{8,}$/.test(e)}questions(){this.account.questionR1==this.userData.questionR1&&this.account.questionR2==this.userData.questionR2?this.changeSlide("next"):this.contadorLocal<3?(this.presentModal(this.contadorLocal),this.contadorLocal+=1):(this.presentModalBlock(),this.userService.questions({email:this.userData.email,contador:this.contadorLocal}),this.navCtrl.navigateForward(""))}presentModal(e){return(0,i.mG)(this,void 0,void 0,function*(){const t=yield this.modalCtrl.create({component:c.c,cssClass:"info-modal",componentProps:{icon:"assets/images/pup_land/Cancel_1.svg",title:"Al menos una de las respuestas es incorrecta",content:"Te quedan "+(3-e)+" intentos",btnLabel:"Entendido"}});return yield t.present()})}presentModalBlock(){return(0,i.mG)(this,void 0,void 0,function*(){const e=yield this.modalCtrl.create({component:c.c,cssClass:"info-modal",componentProps:{icon:"assets/images/pup_land/Account_bloqued.svg",title:"Tu cuenta ha sido bloqueda",content:"Para recuperar acceso a tu cuenta escr\xedbenos a soporte@viio.me desde tu correo registrado. Te pediremos algunos datos para verificar titularidad de la cuenta",btnLabel:"Entendido"}});return yield e.present()})}presentErrorToast(){return(0,i.mG)(this,void 0,void 0,function*(){(yield this.toastCtrl.create({message:"Respuestas incorrectas",duration:3e3,position:"top"})).present()})}recoverPassword(e){return(0,i.mG)(this,void 0,void 0,function*(){this.storage.getMemo(),this.passwordValidated=this.checkPassword(this.password),console.log(this.passwordValidated),this.passwordsAreEquals=this.password==this.retypepassword,console.log(this.passwordsAreEquals),this.passwordValidated&&this.passwordsAreEquals?(console.log("updating password",this.passwordValidated),this.userService.recover({email:this.userData.email,password:this.password,retypepassword:this.retypepassword}).subscribe(e=>{console.log(e)},e=>{console.log(e)})):this.sendAlertToast("Las contrase\xf1as deben ser iguales"),this.navCtrl.navigateForward("")})}getUserPromise(e){return(0,i.mG)(this,void 0,void 0,function*(){yield this.userService.getUserPromise(e)})}displayControl(e){return e.invalid&&(e.dirty||e.touched)}}return e.\u0275fac=function(t){return new(t||e)(l.Y36(a.gz),l.Y36(a.F0),l.Y36(r.yF),l.Y36(u.e),l.Y36(r.SH),l.Y36(p.V),l.Y36(g.K),l.Y36(r.IN))},e.\u0275cmp=l.Xpm({type:e,selectors:[["app-recuperar-contrasena"]],viewQuery:function(e,t){if(1&e&&l.Gf(v,5),2&e){let e;l.iGM(e=l.CRH())&&(t.swiper=e.first)}},decls:5,vars:2,consts:[[3,"config","virtual"],["recoverPasswordSwiper",""],["swiperSlide",""],[1,"swiper-slide__container"],[3,"title"],["securityForm","ngForm"],[1,"p","center","pad-b"],[4,"ngIf"],["type","text","name","recover_q1","autocomplete","off","pattern","[a-zA-Z 0-9._%+-]{1,15}","required","",3,"ngModel","ngModelOptions","ngModelChange"],["q1error","ngModel"],[1,"msg_alert"],["type","text","id","sign-up_q2","name","sign-up_q2","autocomplete","off","pattern","[a-zA-Z 0-9._%+-]{1,25}","required","",3,"ngModel","ngModelOptions","ngModelChange"],["q2error","ngModel"],[1,"recuperar__btn"],[3,"label","disable","click"],[1,"alert"],[3,"title","arrows"],["passwordForm","ngForm"],[1,"input-group","col-6","mx-auto"],[1,"form__password"],["id","recoverPassword","name","recoverPassword","placeholder","Escribe tu contrase\xf1a","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!.:#/+=^_%*?&\\-])([A-Za-z\\d$@$!%*?&]|[^ ]){8,}$","required","",1,"input",3,"type","ngModel","ngModelOptions","ngModelChange"],["passeorderror","ngModel"],[1,"icon"],["src","assets/icon/password/show-password.svg","alt","",3,"click"],["src","assets/icon/password/hide-password.svg","alt","",3,"click"],["id","recoverRetypePassword","name","recoverPassword","placeholder","Escribe tu contrase\xf1a","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[$@$!.:#/+=^_%*?&\\-])([A-Za-z\\d$@$!%*?&]|[^ ]){8,}$","required","",1,"input",3,"type","ngModel","ngModelOptions","ngModelChange"],["veriPassworderror","ngModel"]],template:function(e,t){1&e&&(l.TgZ(0,"ion-content"),l.TgZ(1,"swiper",0,1),l.YNc(3,y,26,19,"ng-template",2),l.YNc(4,Q,34,23,"ng-template",2),l.qZA(),l.qZA()),2&e&&(l.xp6(1),l.Q6J("config",t.config)("virtual",!0))},directives:[r.W2,h.nF,h.YC,Z.r,n._Y,n.JL,n.F,o.O5,n.Fj,n.c5,n.Q7,n.JJ,n.On,w.r],styles:[".recuperar__btn[_ngcontent-%COMP%]{margin-bottom:var(--margin-btn)}form[_ngcontent-%COMP%]   .hide[_ngcontent-%COMP%]{display:none}form[_ngcontent-%COMP%]   .inner-addon[_ngcontent-%COMP%]{position:relative}form[_ngcontent-%COMP%]   .left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:30px}form[_ngcontent-%COMP%]   .right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:30px}form[_ngcontent-%COMP%]   .cVerificacion[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{float:left;position:inline}"]}),e})()}];let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[a.Bz.forChild(U)],a.Bz]}),e})();var S=s(5642);let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.oAB({type:e}),e.\u0275inj=l.cJS({imports:[[o.ez,n.u5,r.Pc,Y,S.K,h.kz]]}),e})()}}]);